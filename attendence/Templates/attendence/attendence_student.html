{% extends 'student/student_base.html'%}
{% load static%}
 
 {% load template_filters %}
{% block content%}

<head>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script type = "text/javascript" src = "https://www.gstatic.com/charts/loader.js">
      </script>
      <script type = "text/javascript">
         google.charts.load('current', {packages: ['corechart']}); 
         
      </script>
     
<style type="text/css">
    .tab-content > .tab-pane:not(.active),
.pill-content > .pill-pane:not(.active) {
    display: block;
    height: 0;
    overflow-y: hidden;
} 
.style{
  font-size: 20px;
  font-weight: 500;
}
.block{
  height: 30vh;
}
.wow{
   visibility: hidden;
}
.btn{
  display:block;
  margin: 30px auto;
  font-size: 20px;
}
.btn .fas{
  
  font-size: 18px;
}
</style>
</head>
<script language = "JavaScript">
         function drawChart() {
            // Define the chart to be drawn.
            var data = google.visualization.arrayToDataTable([
               ['Lec', 'Attendence',{ role: 'style' }],
               {% for lec in list_lec %}
               ['{{lec}} Lec' ,  {{percent_lec_dict|get_item:lec}}, 'rgb(94,204,186)'],
               {% endfor%}
               {% for lab in list_lab %}
               ['{{lab}} Lab' ,  {{percent_lab_dict|get_item:lab}},'rgb(48,106,251)'],
               {% endfor%}

               
            ]);

            var options = {
        
            title: 'Attendence (in percent)',
           animation: {
          duration: 5000,
          easing: 'out',
          "startup": true
      },
        
        hAxis: {viewWindow:{min: 0, max: 100}},
        
        
    };

            // Instantiate and draw the chart.
            var chart = new google.visualization.BarChart(document.getElementById('container1'));
            chart.draw(data, options);
         }
         google.charts.setOnLoadCallback(drawChart);

      </script>

      

<div class="page-breadcrumb">
                <div class="row align-items-center d-md-flex">
                    <div class="col-10">
                        <h4 class="page-title">Dashboard</h4>
                        <div class="d-flex align-items-center">
                            <nav aria-label="breadcrumb">
                                <ol class="breadcrumb">
                                    <li class="breadcrumb-item"><a class="text-dark" href="#">Attendence</a></li>
                                    <li class="breadcrumb-item active" aria-current="page"></li>
                                </ol>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>










        
        <div class="row">
            <div class="col-12">
                <nav>
                    <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                        <a class="nav-item nav-link active text-dark" id="nav-summary-tab" data-toggle="tab" href="#nav-summary" role="tab" aria-controls="nav-summary" aria-selected="true">Summary</a>
                        <a class="nav-item nav-link text-dark" id="nav-graph-tab" data-toggle="tab" href="#nav-graph" role="tab" aria-controls="nav-graph" aria-selected="false">Attendence Graph View</a>
                        <a class="nav-item nav-link text-dark" id="nav-statistics-tab" data-toggle="tab" href="#nav-statistics" role="tab" aria-controls="nav-statistics" aria-selected="false">Attendence Statistics View</a>
                        
                        
                    </div>
                </nav>





<div class="tab-content py-3 px-3 px-sm-0" id="nav-tabContent">

                <div class="tab-pane fade hii" id="nav-graph" role="tabpanel" aria-labelledby="nav-graph-tab">
                    <h4>Attendence Graph View</h4>
                <div class="row">
                    <div class="col-12">
                            <div id = "container1" style = "width: 100%; height: 600px; margin: 0 auto">

                             </div>
                     </div>
                </div>
            </div>








            
                    <div class="tab-pane fade show active" id="nav-summary" role="tabpanel" aria-labelledby="nav-summary-tab">

                        <div class="row">
                            <div class="col-lg-12">
                                <a class="text-dark" href="#">
                                    <div class="card" style="text-align: center;">
                                        <div class="comment-widgets scrollable">
                                            <div class="d-flex flex-row comment-row m-t-0">
                                                <div class="card-body">
                                                    <i class="mdi mdi-account-check mdi-36px " aria-expanded="false"></i><h4 class="card-title">Overall Attendence : <span class="counter-count">{{total_percent}}</span>%</h4>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>




                            <div class="col-lg-6">
                                <a class="text-dark" href="#">
                                    <div class="card" style="text-align: center;">
                                        <div class="comment-widgets scrollable">
                                            <div class="d-flex flex-row comment-row m-t-0">
                                                <div class="card-body">
                                                    <i class="mdi mdi-account-check mdi-36px " aria-expanded="false"></i><h4 class="card-title">Attendence required :  <span class="counter-count">{{total_percent|subtract:75}}</span>%</h4>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>     




                            <div class="col-lg-6">
                                <a class="text-dark" href="#">
                                    <div class="card" style="text-align: center;">
                                        <div class="comment-widgets scrollable">
                                            <div class="d-flex flex-row comment-row m-t-0">
                                                <div class="card-body">
                                                    <i class="mdi mdi-account-star mdi-36px " aria-expanded="false"></i><h4 class="card-title">Overall Defaulter:
                                                        {% if total_percent < 75 %}
                                                        Yes
                                                        {% else %}
                                                        No
                                                        {% endif%}
                                                    </h4>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>     
                        </div>
                            <h4>Defaulter In Specific Lecs: </h4>

                        <div class="row">
                            <div class="col-12">
                            <div class="card" style="text-align: center;">
                    <div class="card-body">
                <div class="table-responsive m-t-20">
                                <table class="table table-bordered table-responsive-lg">
                                    <thead>
                                        <tr>
                                            <th scope="col">Lecs/Labs</th>
                                            <th scope="col">Defaulters</th>
                                           
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for i in list_lec %}
                                        <tr>
                                            <td>{{i}} Lec</td>
                                            <td>{% if total_lec_dict|get_item:i < 75 %}
                                                        Yes
                                                        {% else %}
                                                        No
                                                        {% endif%}</td>
                                        </tr>

                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        </div>
                    </div>
                            
                        </div>
                        <h4>Defaulter In Specific Labs: </h4><br>
                        <div class="row">
                            <div class="col-12">
                            <div class="card" style="text-align: center;">
                    <div class="card-body">
                <div class="table-responsive m-t-20">
                                <table class="table table-bordered table-responsive-lg">
                                    <thead>
                                        <tr>
                                            <th scope="col">Lecs/Labs</th>
                                            <th scope="col">Defaulters</th>
                                           
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for i in list_lab %}
                                        <tr>
                                            <td>{{i}} Lab</td>
                                            <td>{% if total_lab_dict|get_item:i < 75 %}
                                                        Yes
                                                        {% else %}
                                                        No
                                                        {% endif%}</td>
                                        </tr>

                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        </div>
                    </div>
                            
                        </div>
                            

                        
                    </div>





            <div class="tab-pane fade" id="nav-statistics" role="tabpanel" aria-labelledby="nav-statistics-tab">

                <div class="row">
                    <!-- column -->
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <!-- title -->
                                <div class="d-md-flex align-items-center">
                                    <div>
                                        <h4 class="card-title">Attendence of Lecs</h4>
                                        <h5 class="card-subtitle">Overview of Lecs</h5>
                                    </div>
                                    <div class="ml-auto">
                                        
                                    </div>
                                </div>
                                <!-- title -->
                            </div>
                            <div class="table-responsive">
                                <table class="table v-middle">
                                    <thead>
                                        <tr class="bg-light">
                                            <th class="border-top-0">Lectures</th>
                                            <th class="border-top-0">Total Lectures</th>
                                            <th class="border-top-0">Attended Lectures</th>
                                            <th class="border-top-0">Total Attendence</th>
                                            <th class="border-top-0">% Percent</th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for i in list_lec%}
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="m-r-10"><a class="btn btn-circle btn-success text-white" style="font-size: 12px">Lec</a></div>
                                                    <div class="">
                                                        <h4 class="m-b-0 font-12">{{i}}</h4>
                                                    </div>
                                                </div>
                                            </td>
                                            
                                            <td>{{ total_lec_dict|get_item:i }}</td>
                                            
                                            <td>{{ dict_lec|get_item:i }}</td>
                                            {% if  percent_lec_dict|get_item:i  >= 75.0 %}
                                            <td>
                                                <label class="label label-success">High</label>
                                            </td>
                                            {% elif  percent_lec_dict|get_item:i  <= 65.0 %}
                                             <td>
                                                <label class="label label-danger">Low</label>
                                            </td>
                                            {% elif percent_lec_dict|get_item:i  < 75.0 and percent_lec_dict|get_item:i  > 65.0%}
                                             <td>
                                                <label class="label label-info">medium</label>
                                            </td>
                                            {% endif %}
                                            <td>{{ percent_lec_dict|get_item:i }}%</td>
                                            
                                        </tr>
                                        {% endfor%}
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>




















                <div class="row">
                    <!-- column -->
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <!-- title -->
                                <div class="d-md-flex align-items-center">
                                    <div>
                                        <h4 class="card-title">Attendence of Lab</h4>
                                        <h5 class="card-subtitle">Overview of Lab</h5>
                                    </div>
                                    <div class="ml-auto">
                                        
                                    </div>
                                </div>
                                <!-- title -->
                            </div>
                            <div class="table-responsive">
                                <table class="table v-middle">
                                    <thead>
                                        <tr class="bg-light">
                                            <th class="border-top-0">Labs</th>
                                            <th class="border-top-0">Total Labs</th>
                                            <th class="border-top-0">Attended Labs</th>
                                            <th class="border-top-0">Total Attendence</th>
                                            <th class="border-top-0">% percent</th>
                                            
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for i in list_lab%}
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="m-r-10"><a class="btn btn-circle btn-info text-white" style="font-size: 12px">Lab</a></div>
                                                    <div class="">
                                                        <h4 class="m-b-0 font-12">{{i}}</h4>
                                                    </div>
                                                </div>
                                            </td>
                                            
                                            <td>{{ total_lab_dict|get_item:i }}</td>
                                            
                                            <td>{{ dict_lab|get_item:i }}</td>
                                            {% if  percent_lab_dict|get_item:i  >= 75.0 %}
                                            <td>
                                                <label class="label label-success">High</label>
                                            </td>
                                            {% elif  percent_lab_dict|get_item:i  <= 65.0 %}
                                             <td>
                                                <label class="label label-danger">Low</label>
                                            </td>
                                            {% elif percent_lab_dict|get_item:i  < 75.0 and percent_lab_dict|get_item:i  > 65.0%}
                                             <td>
                                                <label class="label label-info">medium</label>
                                            </td>
                                            {% endif %}
                                            <td>{{ percent_lab_dict|get_item:i }}</td>
                                            
                                        </tr>
                                        {% endfor%}
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
                  
            
                
            </div>
        </div>




      
</div>
</div>
<script type="text/javascript">
          $('.counter-count').each(function () {
        $(this).prop('Counter',0).animate({
            Counter: $(this).text()
        }, {
            duration: 2000,
            easing: 'swing',
            step: function (now) {
                $(this).text(Math.round(now * 10) / 10);
            }
        });
    });
      </script>

{% endblock %}